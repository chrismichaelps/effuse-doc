---
title: Internacionalización
---

# Internacionalización

El paquete `@effuse/i18n` proporciona internacionalización segura en tipos con cambio de locale reactivo.

## Configuración

```typescript
import { createI18n } from '@effuse/i18n';

const translations = {
	en: {
		greeting: 'Hello, {{name}}!',
		app: {
			title: 'My App',
		},
		items: {
			count_one: '{{count}} item',
			count_other: '{{count}} items',
		},
	},
	es: {
		greeting: '¡Hola, {{name}}!',
		app: {
			title: 'Mi Aplicación',
		},
		items: {
			count_one: '{{count}} elemento',
			count_other: '{{count}} elementos',
		},
	},
};

createI18n({
	defaultLocale: 'en',
	fallbackLocale: 'en',
	translations,
	detectLocale: true,
	persistLocale: true,
});
```

## Usando Traducciones

Usa el hook `useTranslation` en tus componentes:

```tsx
import { define, computed, signal } from '@effuse/core';
import { useTranslation } from '@effuse/i18n';

const Greeting = define({
	script: () => {
		const { t, locale, setLocale } = useTranslation();
		const userName = signal('Mundo');

		return {
			greeting: computed(() => t('greeting', { name: userName.value })),
			toggleLocale: () => setLocale(locale.value === 'en' ? 'es' : 'en'),
		};
	},
	template: ({ greeting, toggleLocale }) => (
		<div>
			<p>{greeting}</p>
			<button onClick={toggleLocale}>Cambiar Idioma</button>
		</div>
	),
});
```

## Claves Anidadas

Accede a traducciones anidadas usando notación de punto:

```typescript
const { t } = useTranslation();

t('app.title'); // "Mi Aplicación"
```

## Interpolación de Variables

Pasa variables usando la sintaxis `{{variable}}`:

```typescript
t('greeting', { name: 'Desarrollador' }); // "¡Hola, Desarrollador!"
```

## Pluralización

Define formas plurales con sufijos `_one`, `_other`, `_zero`, `_two`, `_few`, `_many`:

```typescript
// En traducciones
items: {
  count_one: '{{count}} elemento',
  count_other: '{{count}} elementos',
}

// Uso
t('items.count', { count: 1 });  // "1 elemento"
t('items.count', { count: 5 });  // "5 elementos"
```

## Referencia de API

### `createI18n(options)`

Inicializa la instancia de i18n. Llama una vez al iniciar la app.

| Opción           | Tipo                | Por Defecto | Descripción                           |
| :--------------- | :------------------ | :---------- | :------------------------------------ |
| `defaultLocale`  | `string`            | —           | El locale por defecto a usar.         |
| `fallbackLocale` | `string`            | —           | Fallback cuando falta una traducción. |
| `translations`   | `Record<string, T>` | —           | Objetos de traducción por locale.     |
| `detectLocale`   | `boolean`           | `false`     | Auto-detectar locale del navegador.   |
| `persistLocale`  | `boolean`           | `false`     | Persistir locale en localStorage.     |

### `useTranslation()`

Retorna utilidades de traducción para usar en componentes.

| Propiedad   | Tipo                                | Descripción                                   |
| :---------- | :---------------------------------- | :-------------------------------------------- |
| `t`         | `(key: string, params?) => string`  | Traducir una clave con parámetros opcionales. |
| `locale`    | `Signal<string>`                    | Señal reactiva del locale actual.             |
| `setLocale` | `(locale: string) => Promise<void>` | Cambiar el locale actual.                     |
| `hasKey`    | `(key: string) => boolean`          | Verificar si existe una clave de traducción.  |

### `getI18n()`

Retorna la instancia global de i18n para acceso directo fuera de componentes.

```typescript
import { getI18n } from '@effuse/i18n';

const i18n = getI18n();
i18n.setLocale('es');
```
